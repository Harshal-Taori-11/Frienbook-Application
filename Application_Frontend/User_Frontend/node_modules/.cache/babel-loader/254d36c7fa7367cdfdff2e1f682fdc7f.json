{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\src\\\\components\\\\post\\\\ListPostsComponent.jsx\";\nimport React, { Component } from 'react';\nimport PostDataService from '../../api/main/PostDataService.js';\nimport AuthenticationService from './AuthenticationService.js';\nimport moment from 'moment';\nimport PostCard from \"./PostCard\";\n\nvar ListPostsComponent = /*#__PURE__*/function (_Component) {\n  _inherits(ListPostsComponent, _Component);\n\n  function ListPostsComponent(props) {\n    var _this;\n\n    _classCallCheck(this, ListPostsComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ListPostsComponent).call(this, props));\n\n    _this.handleClose = function () {\n      return _this.setShow(false);\n    };\n\n    _this.state = {\n      posts: [],\n      message: null\n    };\n    _this.deletePostClicked = _this.deletePostClicked.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.refreshFeed = _this.refreshFeed.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.show = false;\n    _this.refers = [];\n    return _this;\n  }\n\n  _createClass(ListPostsComponent, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.onRef) {\n        this.props.onRef(undefined);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return true;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.onRef) {\n        this.props.onRef(this);\n      }\n\n      this.refreshFeed();\n    }\n  }, {\n    key: \"refreshFeed\",\n    value: function refreshFeed() {\n      var _this2 = this;\n\n      PostDataService.retrieveAllPosts(this.props.username).then(function (response) {\n        _this2.setState({\n          posts: response.data.reverse()\n        });\n      });\n      this.refers.forEach(function (refer) {\n        if (refer) refer.refreshComments();\n      });\n    }\n  }, {\n    key: \"deletePostClicked\",\n    value: function deletePostClicked(id) {\n      var _this3 = this;\n\n      var username = AuthenticationService.getLoggedInUserName();\n      PostDataService.deletePost(username, id).then(function (response) {\n        _this3.setState({\n          message: \"Delete of post \".concat(id, \" Successful\")\n        });\n\n        _this3.refreshFeed();\n\n        _this3.props.stompClient.send(\"/app/postStatus\", {}, true);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }, this.state.message && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"alert alert-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 40\n        }\n      }, this.state.message), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }\n      }, this.state.posts.map(function (post, i) {\n        return /*#__PURE__*/React.createElement(PostCard, {\n          key: post.id,\n          post: post,\n          ref: function ref(_ref) {\n            return _this4.refers[post.id] = _ref;\n          },\n          refreshFeed: _this4.refreshFeed,\n          deletePostClicked: _this4.deletePostClicked,\n          username: _this4.props.username,\n          stompClient: _this4.props.stompClient,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 40\n          }\n        });\n      })))));\n    }\n  }]);\n\n  return ListPostsComponent;\n}(Component);\n\nexport default ListPostsComponent;","map":{"version":3,"names":["React","Component","PostDataService","AuthenticationService","moment","PostCard","ListPostsComponent","props","handleClose","setShow","state","posts","message","deletePostClicked","bind","refreshFeed","show","refers","onRef","undefined","nextProps","nextState","retrieveAllPosts","username","then","response","setState","data","reverse","forEach","refer","refreshComments","id","getLoggedInUserName","deletePost","stompClient","send","map","post","i","ref"],"sources":["C:/Users/Harshal Taori/Documents/MFPE PROJECT/26  TUESDAY/friendbook-frontend/src/components/post/ListPostsComponent.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport PostDataService from '../../api/main/PostDataService.js'\r\nimport AuthenticationService from './AuthenticationService.js'\r\nimport moment from 'moment'\r\nimport PostCard from \"./PostCard\"\r\nclass ListPostsComponent extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            posts: [],\r\n            message: null\r\n        }\r\n        this.deletePostClicked = this.deletePostClicked.bind(this)\r\n        this.refreshFeed = this.refreshFeed.bind(this)\r\n        this.show = false;\r\n        this.refers = [];\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if(this.props.onRef) {\r\n            this.props.onRef(undefined)   \r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return true\r\n    }\r\n\r\n    componentDidMount() {\r\n        if(this.props.onRef) {\r\n            this.props.onRef(this)\r\n        }\r\n\r\n        this.refreshFeed();\r\n\r\n    }\r\n\r\n    refreshFeed() {\r\n        PostDataService.retrieveAllPosts(this.props.username)\r\n            .then(\r\n                response => {\r\n                    this.setState({ posts: response.data.reverse() })\r\n                }\r\n            )\r\n        \r\n        this.refers.forEach(refer => {\r\n            if(refer)\r\n                refer.refreshComments()\r\n        });\r\n    }\r\n\r\n    deletePostClicked(id) {\r\n        let username = AuthenticationService.getLoggedInUserName()\r\n        PostDataService.deletePost(username, id)\r\n            .then(\r\n                response => {\r\n                    this.setState({ message: `Delete of post ${id} Successful` })\r\n                    this.refreshFeed();\r\n                    this.props.stompClient.send(\"/app/postStatus\", {}, true);\r\n                }\r\n            )\r\n\r\n    }\r\n\r\n    handleClose = () => this.setShow(false);\r\n    \r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.message && <div className=\"alert alert-success\">{this.state.message}</div>}\r\n                <div className=\"wrap\">\r\n                    <div className=\"table\">\r\n                        <div>\r\n                            {\r\n                                this.state.posts.map(\r\n                                    (post,i) =>\r\n                                       <PostCard key={post.id} post={post} ref={ref => this.refers[post.id] = ref} refreshFeed={this.refreshFeed} deletePostClicked={this.deletePostClicked} username={this.props.username} stompClient={this.props.stompClient}/>\r\n                                )\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ListPostsComponent"],"mappings":"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"},"metadata":{},"sourceType":"module"}