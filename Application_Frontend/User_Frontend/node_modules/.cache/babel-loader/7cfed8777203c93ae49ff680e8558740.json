{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\src\\\\components\\\\post\\\\AuthenticatedRoute.jsx\";\nimport React, { Component } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport AuthenticationService from './AuthenticationService.js';\nimport axios from 'axios';\nimport ChatBox from '../chatbox/ChatBoxSide';\nexport var USER_NAME_SESSION_ATTRIBUTE_NAME = 'authenticatedUser';\n\nvar AuthenticatedRoute = /*#__PURE__*/function (_Component) {\n  _inherits(AuthenticatedRoute, _Component);\n\n  function AuthenticatedRoute(props) {\n    var _this;\n\n    _classCallCheck(this, AuthenticatedRoute);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthenticatedRoute).call(this, props));\n    _this.state = {\n      stompClient: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(AuthenticatedRoute, [{\n    key: \"isUserLoggedIn\",\n    value: function isUserLoggedIn() {\n      var user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\n      if (user === null) return false;\n      return true;\n    }\n  }, {\n    key: \"setupAxiosInterceptors\",\n    value: function setupAxiosInterceptors() {\n      var _this2 = this;\n\n      axios.interceptors.request.use(function (config) {\n        if (_this2.isUserLoggedIn()) {\n          config.headers.authorization = sessionStorage.getItem(\"USER_TOKEN\");\n        }\n\n        return config;\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setupAxiosInterceptors();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (AuthenticationService.isUserLoggedIn()) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"content-wrapper\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"main-content\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 53\n          }\n        }, /*#__PURE__*/React.createElement(Route, Object.assign({}, this.props, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 83\n          }\n        }))), /*#__PURE__*/React.createElement(ChatBox, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 113\n          }\n        }), \" \");\n      } else {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/login\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 20\n          }\n        });\n      }\n    }\n  }]);\n\n  return AuthenticatedRoute;\n}(Component);\n\nexport default AuthenticatedRoute;","map":{"version":3,"names":["React","Component","Route","Redirect","AuthenticationService","axios","ChatBox","USER_NAME_SESSION_ATTRIBUTE_NAME","AuthenticatedRoute","props","state","stompClient","user","sessionStorage","getItem","interceptors","request","use","config","isUserLoggedIn","headers","authorization","setupAxiosInterceptors"],"sources":["C:/Users/Harshal Taori/Documents/MFPE PROJECT/26  TUESDAY/friendbook-frontend/src/components/post/AuthenticatedRoute.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { Route, Redirect } from 'react-router-dom'\r\nimport AuthenticationService from './AuthenticationService.js'\r\nimport axios from 'axios'\r\nimport ChatBox from '../chatbox/ChatBoxSide'\r\n\r\nexport const USER_NAME_SESSION_ATTRIBUTE_NAME = 'authenticatedUser'\r\n\r\nclass AuthenticatedRoute extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            stompClient: \"\"\r\n        }\r\n    }\r\n    isUserLoggedIn() {\r\n        let user = sessionStorage.getItem(USER_NAME_SESSION_ATTRIBUTE_NAME);\r\n        if (user === null) return false;\r\n        return true;\r\n    }\r\n    setupAxiosInterceptors() {\r\n        axios.interceptors.request.use(\r\n            (config) => {\r\n                if (this.isUserLoggedIn()) {\r\n                    config.headers.authorization = sessionStorage.getItem(\"USER_TOKEN\");\r\n                }\r\n                return config\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n\r\n    componentWillMount() {\r\n        this.setupAxiosInterceptors();\r\n    }\r\n    render() {\r\n        if (AuthenticationService.isUserLoggedIn()) {\r\n            return <div className=\"content-wrapper\"><div className=\"main-content\"><Route {...this.props}/></div><ChatBox/> </div>\r\n        } else {\r\n            return <Redirect to=\"/login\" />\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport default AuthenticatedRoute"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;AACA,OAAOC,qBAAP,MAAkC,4BAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AAEA,OAAO,IAAMC,gCAAgC,GAAG,mBAAzC;;IAEDC,kB;;;EACF,4BAAYC,KAAZ,EAAmB;IAAA;;IAAA;;IACf,wFAAMA,KAAN;IACA,MAAKC,KAAL,GAAa;MACTC,WAAW,EAAE;IADJ,CAAb;IAFe;EAKlB;;;;qCACgB;MACb,IAAIC,IAAI,GAAGC,cAAc,CAACC,OAAf,CAAuBP,gCAAvB,CAAX;MACA,IAAIK,IAAI,KAAK,IAAb,EAAmB,OAAO,KAAP;MACnB,OAAO,IAAP;IACH;;;6CACwB;MAAA;;MACrBP,KAAK,CAACU,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACI,UAACC,MAAD,EAAY;QACR,IAAI,MAAI,CAACC,cAAL,EAAJ,EAA2B;UACvBD,MAAM,CAACE,OAAP,CAAeC,aAAf,GAA+BR,cAAc,CAACC,OAAf,CAAuB,YAAvB,CAA/B;QACH;;QACD,OAAOI,MAAP;MACH,CANL;IAQH;;;yCAIoB;MACjB,KAAKI,sBAAL;IACH;;;6BACQ;MACL,IAAIlB,qBAAqB,CAACe,cAAtB,EAAJ,EAA4C;QACxC,oBAAO;UAAK,SAAS,EAAC,iBAAf;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,gBAAiC;UAAK,SAAS,EAAC,cAAf;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,gBAA8B,oBAAC,KAAD,oBAAW,KAAKV,KAAhB;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,GAA9B,CAAjC,eAA6F,oBAAC,OAAD;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,EAA7F,MAAP;MACH,CAFD,MAEO;QACH,oBAAO,oBAAC,QAAD;UAAU,EAAE,EAAC,QAAb;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,EAAP;MACH;IAEJ;;;;EAnC4BR,S;;AAsCjC,eAAeO,kBAAf"},"metadata":{},"sourceType":"module"}