{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Harshal Taori\\\\Documents\\\\MFPE PROJECT\\\\26  TUESDAY\\\\friendbook-frontend\\\\src\\\\components\\\\post\\\\WelcomeComponent.jsx\";\nimport React, { Component } from 'react';\nimport PostDataService from '../../api/main/PostDataService';\nimport AuthenticationService from './AuthenticationService';\nimport AccountProfileService from '../../api/main/AccountProfileService';\nimport { ReactComponent as Empty } from \"@svgr/webpack?-svgo,+ref!./assets/empty.svg\";\nimport PostCard from './PostCard';\nimport PostComponent from './PostComponent';\nimport Socket from './StartSocket';\nimport moment from 'moment';\nvar stompClient = null;\n\nvar WelcomeComponent = /*#__PURE__*/function (_Component) {\n  _inherits(WelcomeComponent, _Component);\n\n  function WelcomeComponent(props) {\n    var _this;\n\n    _classCallCheck(this, WelcomeComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WelcomeComponent).call(this, props));\n\n    _this.onConnected = function () {\n      stompClient.subscribe(\"/topic/status\", _this.retrieveAllTodos);\n    };\n\n    _this.onError = function (err) {\n      console.error(err);\n    };\n\n    _this.getFollowers = function () {\n      var user = AuthenticationService.getLoggedInUserName();\n      AccountProfileService.getFollowingUsers(user).then(function (response) {\n        if (response.data) {\n          _this.setState({\n            followingAndMe: [].concat(_toConsumableArray(response.data), [user])\n          });\n        }\n      });\n    };\n\n    _this.retrieveAllTodos = function (payload) {\n      PostDataService.retrieveAll().then(function (response) {\n        _this.setState({\n          posts: response.data.sort(function (a, b) {\n            return moment.utc(a.targetDate).diff(moment.utc(b.targetDate));\n          }).reverse()\n        });\n      });\n\n      _this.refers.forEach(function (refer) {\n        if (refer) refer.refreshComments();\n      });\n    };\n\n    _this.deletePostClicked = function (id) {\n      var username = AuthenticationService.getLoggedInUserName();\n\n      var that = _assertThisInitialized(_assertThisInitialized(_this));\n\n      PostDataService.deletePost(username, id).then(function (response) {\n        that.retrieveAllTodos();\n        stompClient.send(\"/app/postStatus\", {}, true);\n      });\n      console.log(\"ff\", id);\n    };\n\n    _this.state = {\n      posts: [],\n      followingAndMe: []\n    };\n    _this.refers = [];\n    return _this;\n  }\n\n  _createClass(WelcomeComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getFollowers();\n      this.retrieveAllTodos();\n      stompClient = Socket.connect();\n      stompClient.connect({}, this.onConnected, this.onError);\n      window.scrollTo(0, 0);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"generalTodo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(PostComponent, {\n        refreshFeed: this.retrieveAllTodos,\n        username: AuthenticationService.getLoggedInUserName(),\n        stompClient: stompClient,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }\n      }), this.state.posts.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, this.state.posts.map(function (post, i) {\n        if (_this2.state.followingAndMe.includes(post.username)) return /*#__PURE__*/React.createElement(PostCard, {\n          key: post.id,\n          post: post,\n          ref: function ref(_ref) {\n            return _this2.refers[post.id] = _ref;\n          },\n          refreshFeed: _this2.retrieveAllTodos,\n          deletePostClicked: _this2.deletePostClicked,\n          username: post.username,\n          stompClient: stompClient,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }\n        });\n      })) : /*#__PURE__*/React.createElement(Empty, {\n        width: 50 + \"vw\",\n        style: {\n          maxWidth: 500\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 23\n        }\n      }));\n    }\n  }]);\n\n  return WelcomeComponent;\n}(Component);\n\nexport default WelcomeComponent;","map":{"version":3,"names":["React","Component","PostDataService","AuthenticationService","AccountProfileService","PostCard","PostComponent","Socket","moment","stompClient","WelcomeComponent","props","onConnected","subscribe","retrieveAllTodos","onError","err","console","error","getFollowers","user","getLoggedInUserName","getFollowingUsers","then","response","data","setState","followingAndMe","payload","retrieveAll","posts","sort","a","b","utc","targetDate","diff","reverse","refers","forEach","refer","refreshComments","deletePostClicked","id","username","that","deletePost","send","log","state","connect","window","scrollTo","length","map","post","i","includes","ref","maxWidth"],"sources":["C:/Users/Harshal Taori/Documents/MFPE PROJECT/26  TUESDAY/friendbook-frontend/src/components/post/WelcomeComponent.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport PostDataService from '../../api/main/PostDataService'\r\nimport AuthenticationService from './AuthenticationService';\r\nimport AccountProfileService from '../../api/main/AccountProfileService';\r\nimport { ReactComponent as Empty } from './assets/empty.svg';\r\nimport PostCard from './PostCard'\r\nimport PostComponent from './PostComponent';\r\nimport Socket from './StartSocket';\r\nimport moment from 'moment';\r\n\r\n\r\nlet stompClient = null;\r\n\r\nclass WelcomeComponent extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            posts: [],\r\n            followingAndMe: []\r\n        }\r\n        this.refers = [];\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getFollowers();\r\n        this.retrieveAllTodos();\r\n        stompClient = Socket.connect();\r\n        stompClient.connect({}, this.onConnected, this.onError);\r\n        window.scrollTo(0, 0);\r\n    }\r\n\r\n    onConnected = () => {\r\n        stompClient.subscribe(\"/topic/status\", this.retrieveAllTodos);\r\n    }\r\n\r\n    onError = (err) => {\r\n        console.error(err);\r\n    }\r\n\r\n    getFollowers=()=>{\r\n        let user= AuthenticationService.getLoggedInUserName();\r\n        AccountProfileService.getFollowingUsers(user)\r\n        .then((response)=>{\r\n            if(response.data)\r\n            {\r\n                this.setState({followingAndMe: [...response.data,user]});\r\n            }\r\n        });\r\n    }\r\n\r\n    retrieveAllTodos = (payload) => {\r\n        PostDataService.retrieveAll().then(response => {\r\n            this.setState({\r\n                posts: response.data.sort(function(a,b) {\r\n                    return moment.utc(a.targetDate).diff(moment.utc(b.targetDate));\r\n                }).reverse()\r\n            })\r\n        });\r\n        this.refers.forEach(refer => {\r\n            if(refer)\r\n                refer.refreshComments()\r\n        });\r\n    }\r\n\r\n    deletePostClicked = (id) => {\r\n        let username = AuthenticationService.getLoggedInUserName();\r\n        let that = this;\r\n        PostDataService.deletePost(username, id)\r\n            .then(response => {\r\n                    that.retrieveAllTodos();\r\n                    stompClient.send(\"/app/postStatus\", {}, true);\r\n                }\r\n            );\r\n        console.log(\"ff\",id);\r\n    }   \r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"generalTodo\">\r\n                <PostComponent refreshFeed={this.retrieveAllTodos} username={AuthenticationService.getLoggedInUserName()} stompClient={stompClient}/>\r\n                {this.state.posts.length > 0 ? <>\r\n                {this.state.posts.map(\r\n                    (post,i) =>{\r\n                        if(this.state.followingAndMe.includes(post.username))\r\n                        return(\r\n                        <PostCard key={post.id} post={post} ref={ref => this.refers[post.id] = ref} refreshFeed={this.retrieveAllTodos} deletePostClicked={this.deletePostClicked} username={post.username} stompClient={stompClient}/>\r\n                    )})}\r\n                </> : <Empty width={50 + \"vw\"} style={{maxWidth: 500}}/>}\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default WelcomeComponent"],"mappings":"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"},"metadata":{},"sourceType":"module"}